{"version":3,"file":"js/products.be746b7b.js","mappings":"8JAIA,MAAMA,GAASC,EAAAA,EAAAA,KAEf,QAAeC,EAAAA,EAAAA,IAAY,eAAgB,CACvCC,MAAO,KAAM,CACTC,SAAU,KAEdC,QAAS,CACLC,aAAeH,GAAUA,EAAMC,SAASG,MAAK,CAACC,EAAGC,IAAMD,EAAEE,MAAQD,EAAEC,SAEvEC,QAAS,CACLC,cACI,MAAMC,EAAO,iEACbb,EAAOc,WAAY,EACnBC,IAAAA,IAAUF,GAAKG,MAAMC,IACjBC,KAAKd,SAAWa,EAASE,KAAKf,SAC9BgB,QAAQC,IAAI,YAAaJ,GACzBjB,EAAOc,WAAY,U,mGChBtBQ,MAAM,sB,GACXC,EAAAA,EAAAA,GAOQ,eANNA,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAa,UAAT,SACJA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAS,UALb,G,GAUQC,MAAA,iB,uBAYGF,MAAM,M,SACNA,MAAM,M,SACNA,MAAM,M,GAGNA,MAAM,0B,gDAgBLA,MAAM,2CACNG,KAAK,U,GAELF,EAAAA,EAAAA,GAA+C,QAAzCD,MAAM,mBAAkB,cAAU,G,GAAxCI,G,WACI,W,8FAnDtBC,EAAAA,EAAAA,IA4DYC,EAAA,M,kBA3DV,IA0DM,EA1DNL,EAAAA,EAAAA,GA0DM,aAzDJM,EAAAA,EAAAA,IAAuCC,EAAA,CAA7BC,OAAQC,EAAAA,WAAS,oBAC3BT,EAAAA,EAAAA,GAuDQ,QAvDR,EAuDQ,CAtDNU,GAQAV,EAAAA,EAAAA,GA6CQ,6BA5CNW,EAAAA,EAAAA,IA2CKC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IA3CcJ,EAAAA,cAARK,K,WAAXH,EAAAA,EAAAA,IA2CK,MA3C6BI,IAAKD,EAAKE,IAA5C,EACEhB,EAAAA,EAAAA,GAKK,KALL,EAKK,EAJHA,EAAAA,EAAAA,GAGO,OAFLC,OAA0E,SAA1E,0EAA0E,CAAAgB,gBAAAA,OACxCH,EAAKI,UAAQ,UAFjD,WAKFlB,EAAAA,EAAAA,GAIK,YAHHA,EAAAA,EAAAA,GAEM,KAFHmB,KAAK,SAASpB,MAAM,YAAaqB,QAAK,GAAEC,EAAAA,WAAWP,EAAKE,IAAMM,UAAO,oBAAEb,EAAAA,KAAAA,EAAAA,OAAAA,MAA1E,QACEK,EAAKS,OAAK,GAAAC,MAGdxB,EAAAA,EAAAA,GAIK,WAHoBc,EAAK3B,OAA5B,iBAA4BA,EAAAA,EAAAA,OAA5BwB,EAAAA,EAAAA,IAAkE,MAAlE,GAAkEc,EAAAA,EAAAA,IAA5BX,EAAKY,cAAe,KAAE,IACtCZ,EAAK3B,QAAAA,EAAAA,EAAAA,OAA3BwB,EAAAA,EAAAA,IAAoE,MAApE,EAAkC,OAAGc,EAAAA,EAAAA,IAAGX,EAAKY,cAAe,KAAE,KAA9D,eACsBZ,EAAK3B,QAAAA,EAAAA,EAAAA,OAA3BwB,EAAAA,EAAAA,IAA+D,MAA/D,EAAkC,SAAKc,EAAAA,EAAAA,IAAGX,EAAK3B,OAAQ,KAAE,KAAzD,kBAEFa,EAAAA,EAAAA,GAyBK,YAxBHA,EAAAA,EAAAA,GAuBM,MAvBN,EAuBM,EAtBJA,EAAAA,EAAAA,GAMS,UALPmB,KAAK,SACLpB,MAAM,4BACLqB,QAAK,GAAEC,EAAAA,WAAWP,EAAKE,KACzB,SAED,EAAAW,IACA3B,EAAAA,EAAAA,GAcS,UAbPmB,KAAK,SACLpB,MAAM,yBACL6B,SAAUd,EAAKE,IAAMP,EAAAA,gBACrBW,QAAK,GAAEX,EAAAA,QAAQK,EAAKE,KAJvB,CAOUF,EAAKE,IAAMP,EAAAA,kBAAAA,EAAAA,EAAAA,OADnBE,EAAAA,EAAAA,IAMM,MANN,EAMMkB,KANN,kBANF,cA1BN,e,2DAyDV,GACEjC,OACE,MAAO,IAETkC,WAAY,CACVC,UAAAA,EAAAA,GAEFC,SAAU,KACLC,EAAAA,EAAAA,IAASC,EAAAA,EAAc,CAAC,qBACxBD,EAAAA,EAAAA,IAASvD,EAAAA,EAAa,CAAC,YAAa,qBAEzCyD,QAAS,KACJC,EAAAA,EAAAA,IAAWF,EAAAA,EAAc,CAAC,oBAC1BE,EAAAA,EAAAA,IAAWC,EAAAA,EAAW,CAAC,YAC1BC,WAAWtB,GACTrB,KAAK4C,QAAQC,KAAM,YAAWxB,OAGlCyB,UACE9C,KAAKN,gB,QCrFT,MAAMqD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://e-commerce/./src/stores/productStore.js","webpack://e-commerce/./src/views/Product.vue","webpack://e-commerce/./src/views/Product.vue?0099"],"sourcesContent":["import axios from 'axios';\nimport { defineStore } from 'pinia';\nimport statusStore from './statusStore';\n\nconst status = statusStore();\n\nexport default defineStore('productStore', {\n    state: () => ({\n        products: [],\n    }),\n    getters: {\n        sortProducts: (state) => state.products.sort((a, b) => a.price - b.price),\n    },\n    actions: {\n        getProducts() {\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n            status.isLoading = true;\n            axios.get(url).then((response) => {\n                this.products = response.data.products;\n                console.log('products:', response);\n                status.isLoading = false;\n            });\n        },\n    }\n});","<template>\n  <ShopBlade>\n    <div>\n      <Loading :active=\"isLoading\"></Loading>\n      <table class=\"table align-middle\">\n        <thead>\n          <tr>\n            <th>圖片</th>\n            <th>商品名稱</th>\n            <th>價格</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in sortProducts\" :key=\"item.id\">\n            <td style=\"width: 200px\">\n              <div\n                style=\"height: 100px; background-size: cover; background-position: center\"\n                :style=\"{ backgroundImage: `url(${item.imageUrl ?? ''})` }\"\n              ></div>\n            </td>\n            <td>\n              <a type=\"button\" class=\"text-dark\" @click=\"getProduct(item.id)\" @keydown=\"bar\">{{\n                item.title\n              }}</a>\n            </td>\n            <td>\n              <div class=\"h5\" v-if=\"!item.price\">{{ item.origin_price }} 元</div>\n              <del class=\"h6\" v-if=\"item.price\">原價 {{ item.origin_price }} 元</del>\n              <div class=\"h5\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\n            </td>\n            <td>\n              <div class=\"btn-group btn-group-sm\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary\"\n                  @click=\"getProduct(item.id)\"\n                >\n                  查看更多\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger\"\n                  :disabled=\"item.id == cartLoadingItem\"\n                  @click=\"addCart(item.id)\"\n                >\n                  <div\n                    v-if=\"item.id == cartLoadingItem\"\n                    class=\"spinner-grow text-danger spinner-grow-sm\"\n                    role=\"status\"\n                  >\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                  加到購物車\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </ShopBlade>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'pinia';\nimport ShopBlade from '@/layouts/ShopBlade.vue';\nimport productStore from '@/stores/productStore';\nimport statusStore from '@/stores/statusStore';\nimport cartStore from '@/stores/cartStore';\n\nexport default {\n  data() {\n    return {};\n  },\n  components: {\n    ShopBlade,\n  },\n  computed: {\n    ...mapState(productStore, ['sortProducts']),\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\n  },\n  methods: {\n    ...mapActions(productStore, ['getProducts']),\n    ...mapActions(cartStore, ['addCart']),\n    getProduct(id) {\n      this.$router.push(`/product/${id}`);\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","import { render } from \"./Product.vue?vue&type=template&id=3965a2fd\"\nimport script from \"./Product.vue?vue&type=script&lang=js\"\nexport * from \"./Product.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\joe\\\\Desktop\\\\vue電商練習\\\\e-commerce\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","products","getters","sortProducts","sort","a","b","price","actions","getProducts","url","isLoading","axios","then","response","this","data","console","log","class","_createElementVNode","style","role","_hoisted_12","_createBlock","_component_ShopBlade","_createVNode","_component_Loading","active","_ctx","_hoisted_2","_createElementBlock","_Fragment","_renderList","item","key","id","backgroundImage","imageUrl","type","onClick","$options","onKeydown","title","_hoisted_4","_toDisplayString","origin_price","_hoisted_9","disabled","_hoisted_13","components","ShopBlade","computed","mapState","productStore","methods","mapActions","cartStore","getProduct","$router","push","created","__exports__","render"],"sourceRoot":""}