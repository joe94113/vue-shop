{"version":3,"file":"js/userCart.ea1108e6.js","mappings":"8JAIA,MAAMA,GAASC,EAAAA,EAAAA,KAEf,QAAeC,EAAAA,EAAAA,IAAY,eAAgB,CACvCC,MAAO,KAAM,CACTC,SAAU,KAEdC,QAAS,CACLC,aAAeH,GAAUA,EAAMC,SAASG,MAAK,CAACC,EAAGC,IAAMD,EAAEE,MAAQD,EAAEC,SAEvEC,QAAS,CACLC,cACI,MAAMC,EAAO,iEACbb,EAAOc,WAAY,EACnBC,IAAAA,IAAUF,GAAKG,MAAMC,IACjBC,KAAKd,SAAWa,EAASE,KAAKf,SAC9BgB,QAAQC,IAAI,YAAaJ,GACzBjB,EAAOc,WAAY,U,6GClB5BQ,MAAM,a,GACJA,MAAM,Y,GAEJA,MAAM,Y,GACJA,MAAM,c,GACFA,MAAM,sB,GACXC,EAAAA,EAAAA,GAOQ,eANNA,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAAS,OACTA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAgC,MAA5BC,MAAA,iBAAqB,OACzBD,EAAAA,EAAAA,GAAW,UAAP,UALR,G,4BAkBUA,EAAAA,EAAAA,GAAuB,KAApBD,MAAM,WAAS,S,GAAlBG,G,uBAOGH,MAAM,gB,GAGNA,MAAM,8B,GACFI,IAAI,O,mDASNJ,MAAM,oB,GAGXA,MAAM,Y,SACsCA,MAAM,gB,GAUxDC,EAAAA,EAAAA,GAAwC,MAApCI,QAAQ,IAAIL,MAAM,YAAW,MAAE,G,GAC/BA,MAAM,Y,aAGVC,EAAAA,EAAAA,GAAsD,MAAlDI,QAAQ,IAAIL,MAAM,yBAAwB,OAAG,G,GAC7CA,MAAM,yB,GAIXA,MAAM,mC,GACFI,IAAI,e,GAQNJ,MAAM,sB,GAcZA,MAAM,4C,GAEFA,MAAM,Q,GACTC,EAAAA,EAAAA,GAAmD,SAA5CG,IAAI,QAAQJ,MAAM,cAAa,SAAK,G,GAexCA,MAAM,Q,GACTC,EAAAA,EAAAA,GAAkD,SAA3CG,IAAI,OAAOJ,MAAM,cAAa,SAAK,G,GAcvCA,MAAM,Q,GACTC,EAAAA,EAAAA,GAAiD,SAA1CG,IAAI,MAAMJ,MAAM,cAAa,SAAK,G,GActCA,MAAM,Q,GACTC,EAAAA,EAAAA,GAAqD,SAA9CG,IAAI,UAAUJ,MAAM,cAAa,SAAK,G,GAc1CA,MAAM,Q,GACTC,EAAAA,EAAAA,GAAkD,SAA3CG,IAAI,UAAUJ,MAAM,cAAa,MAAE,G,GAU5CC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,YAAU,EACnBC,EAAAA,EAAAA,GAA4C,UAApCD,MAAM,kBAAiB,UADjC,G,4JArKRM,EAAAA,EAAAA,IAAuCC,EAAA,CAA7BC,OAAQC,EAAAA,WAAS,oBAC3BR,EAAAA,EAAAA,GA0KM,MA1KN,EA0KM,EAzKJA,EAAAA,EAAAA,GAwKM,MAxKN,EAwKM,EAtKJA,EAAAA,EAAAA,GAqFM,MArFN,EAqFM,EApFJA,EAAAA,EAAAA,GAmFM,MAnFN,EAmFM,EAlFJA,EAAAA,EAAAA,GA6DQ,QA7DR,EA6DQ,CA5DNS,GAQAT,EAAAA,EAAAA,GAyCQ,cAxCUQ,EAAAA,KAAKE,QAAAA,EAAAA,EAAAA,KAAAA,IACnBC,EAAAA,EAAAA,IAqCKC,EAAAA,GAAA,CAAAC,IAAAA,IAAAC,EAAAA,EAAAA,IArCcN,EAAAA,KAAKE,OAAbK,K,WAAXJ,EAAAA,EAAAA,IAqCK,MArC2BE,IAAKE,EAAKC,IAA1C,EACEhB,EAAAA,EAAAA,GASK,YARHA,EAAAA,EAAAA,GAOS,UANPiB,KAAK,SACLlB,MAAM,gCACLmB,SAAUV,EAAAA,kBAAoBO,EAAKC,GACnCG,QAAK,GAAEX,EAAAA,eAAeO,EAAKC,KAJ9B,UASFhB,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAEI,KAFDiB,KAAK,SAASlB,MAAM,GAAIoB,QAAK,GAAEC,EAAAA,WAAWL,EAAKM,QAAQL,IAAMM,UAAO,oBAAEd,EAAAA,KAAAA,EAAAA,OAAAA,MAAzE,QACKO,EAAKM,QAAQE,OAAK,GAAAC,GAEST,EAAKU,SAAAA,EAAAA,EAAAA,OAArCd,EAAAA,EAAAA,IAAyD,MAAzD,EAA6C,YAA7C,kBAEFX,EAAAA,EAAAA,GAaK,YAZHA,EAAAA,EAAAA,GAWM,MAXN,EAWM,EAVJA,EAAAA,EAAAA,GAQU,QARV,EAQU,WAPPA,EAAAA,EAAAA,GAOD,SANEiB,KAAK,SACLlB,MAAM,eACN2B,IAAI,IACHR,SAAUV,EAAAA,kBAAoBO,EAAKC,GACnCW,SAAM,GAAEnB,EAAAA,WAAWO,G,yBACJA,EAAKa,IAAGC,GANzB,kBAMiBd,EAAKa,SAAAA,EAAAA,C,QAArB,SAEJ5B,EAAAA,EAAAA,GAA6D,MAA7D,EAA8B,MAAE8B,EAAAA,EAAAA,IAAGf,EAAKM,QAAQU,MAAI,QAGxD/B,EAAAA,EAAAA,GAKK,KALL,EAKK,CAJUQ,EAAAA,KAAKwB,cAAgBxB,EAAAA,KAAKyB,QAAAA,EAAAA,EAAAA,OAAvCtB,EAAAA,EAAAA,IAEC,QAFD,EACG,UADH,gBAIG,QAFF,KACDmB,EAAAA,EAAAA,IAAGtB,EAAAA,SAAS0B,SAASnB,EAAKiB,cAAW,UAnCzC,yBAwCJhC,EAAAA,EAAAA,GASQ,eARNA,EAAAA,EAAAA,GAGK,WAFHmC,GACAnC,EAAAA,EAAAA,GAA6D,KAA7D,GAA6D8B,EAAAA,EAAAA,IAArCtB,EAAAA,SAAS0B,SAAS1B,EAAAA,KAAKyB,QAAK,KAE5CzB,EAAAA,KAAKwB,cAAgBxB,EAAAA,KAAKyB,QAAAA,EAAAA,EAAAA,OAApCtB,EAAAA,EAAAA,IAGK,KAAAyB,EAAA,CAFHC,GACArC,EAAAA,EAAAA,GAAgF,KAAhF,GAAgF8B,EAAAA,EAAAA,IAA3CtB,EAAAA,SAAS0B,SAAS1B,EAAAA,KAAKwB,cAAW,OAFzE,oBAMJhC,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,EAlBJA,EAAAA,EAAAA,GAOQ,QAPR,EAOQ,WANNA,EAAAA,EAAAA,GAKE,SAJAiB,KAAK,OACLlB,MAAM,e,qCACGuC,EAAAA,YAAWT,GACpBU,YAAY,UAJd,iBAGWD,EAAAA,kBAIbtC,EAAAA,EAAAA,GASM,MATN,EASM,EARJA,EAAAA,EAAAA,GAOS,UANPD,OAAK,SAAC,4BAA2B,CAAAmB,SAGF,IAAXoB,EAAAA,eAFpBrB,KAAK,SACJE,QAAK,oBAAEC,EAAAA,eAAAA,EAAAA,iBAAAA,KAET,UAED,YAMRpB,EAAAA,EAAAA,GA8EM,MA9EN,EA8EM,EA7EJK,EAAAA,EAAAA,IA4EOmC,EAAA,CA5EDzC,MAAM,WAAgC0C,SAAQrB,EAAAA,aAApD,C,kBACE,EAD+BsB,OAAAA,KAAM,EACrC1C,EAAAA,EAAAA,GAcM,MAdN,EAcM,CAbJ2C,GACAtC,EAAAA,EAAAA,IASSuC,EAAA,CARP5B,GAAG,QACH6B,KAAK,QACL5B,KAAK,QACLlB,OAAK,SAAC,eAAc,cACI2C,EAAO,YAC/BH,YAAY,YACZO,MAAM,iB,WACGR,EAAAA,KAAKS,KAAKC,M,qCAAVV,EAAAA,KAAKS,KAAKC,MAAKnB,IAR1B,gCAWAxB,EAAAA,EAAAA,IAAmE4C,EAAA,CAArDJ,KAAK,QAAQ9C,MAAM,wBAGnCC,EAAAA,EAAAA,GAaM,MAbN,EAaM,CAZJkD,GACA7C,EAAAA,EAAAA,IASSuC,EAAA,CARP5B,GAAG,OACH6B,KAAK,KACL5B,KAAK,OACLlB,OAAK,SAAC,eAAc,cACI2C,EAAO,SAC/BH,YAAY,QACZO,MAAM,W,WACGR,EAAAA,KAAKS,KAAKF,K,qCAAVP,EAAAA,KAAKS,KAAKF,KAAIhB,IARzB,gCAUAxB,EAAAA,EAAAA,IAAgE4C,EAAA,CAAlDJ,KAAK,KAAK9C,MAAM,wBAGhCC,EAAAA,EAAAA,GAaM,MAbN,EAaM,CAZJmD,GACA9C,EAAAA,EAAAA,IASSuC,EAAA,CARP5B,GAAG,MACH6B,KAAK,KACL5B,KAAK,MACLlB,OAAK,SAAC,eAAc,cACI2C,EAAO,SAC/BH,YAAY,QACZO,MAAM,W,WACGR,EAAAA,KAAKS,KAAKK,I,qCAAVd,EAAAA,KAAKS,KAAKK,IAAGvB,IARxB,gCAUAxB,EAAAA,EAAAA,IAAgE4C,EAAA,CAAlDJ,KAAK,KAAK9C,MAAM,wBAGhCC,EAAAA,EAAAA,GAaM,MAbN,EAaM,CAZJqD,GACAhD,EAAAA,EAAAA,IASSuC,EAAA,CARP5B,GAAG,UACH6B,KAAK,KACL5B,KAAK,OACLlB,OAAK,SAAC,eAAc,cACI2C,EAAO,SAC/BH,YAAY,QACZO,MAAM,W,WACGR,EAAAA,KAAKS,KAAKO,Q,qCAAVhB,EAAAA,KAAKS,KAAKO,QAAOzB,IAR5B,gCAUAxB,EAAAA,EAAAA,IAAgE4C,EAAA,CAAlDJ,KAAK,KAAK9C,MAAM,wBAGhCC,EAAAA,EAAAA,GAUM,MAVN,EAUM,CATJuD,GASI,SARJvD,EAAAA,EAAAA,GAOY,YANV6C,KAAK,GACL7B,GAAG,UACHjB,MAAM,eACNyD,KAAK,KACLC,KAAK,K,qCACInB,EAAAA,KAAKoB,QAAO7B,IANvB,iBAMWS,EAAAA,KAAKoB,aAGlBC,K,KAzEF,uBA3FN,I,4CAmLF,GACE/D,OACE,MAAO,CACLgE,YAAa,GACbC,KAAM,CACJd,KAAM,CACJF,KAAM,GACNG,MAAO,GACPI,IAAK,GACLE,QAAS,IAEXI,QAAS,MAIfI,SAAU,KACLC,EAAAA,EAAAA,IAASC,EAAAA,EAAW,CAAC,aACrBD,EAAAA,EAAAA,IAASrF,EAAAA,EAAa,CAAC,YAAa,qBAEzCuF,QAAS,KACJC,EAAAA,EAAAA,IAAWC,EAAAA,EAAc,CAAC,oBAC1BD,EAAAA,EAAAA,IAAWF,EAAAA,EAAW,CAAC,UAAW,UAAW,iBAAkB,mBAC/DE,EAAAA,EAAAA,IAAWxF,EAAAA,EAAa,CAAC,gBAC5B0F,WAAWpD,GACTrB,KAAK0E,QAAQC,KAAM,YAAWtD,MAEhCuD,gBACE,MAAMjF,EAAO,2DACPmC,EAAS,CACb+C,KAAM7E,KAAKiE,aAEbjE,KAAKJ,WAAY,EACjBI,KAAK8E,MAAMC,KAAKpF,EAAK,CAAEM,KAAM6B,IAAUhC,MAAMC,IAC3CC,KAAKgF,YAAY,CAAEpD,MAAO,QAAStB,MAAO,YAC1CN,KAAKiF,UACLjF,KAAKJ,WAAY,MAGrBsF,cACE,MAAMvF,EAAO,0DACPwF,EAAQnF,KAAKkE,KACnBlE,KAAK8E,MAAMC,KAAKpF,EAAK,CAAEM,KAAMkF,IAASrF,MAAMsF,IAC1ClF,QAAQC,IAAIiF,QAIlBC,UACErF,KAAKiF,Y,QC/NT,MAAMK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://e-commerce/./src/stores/productStore.js","webpack://e-commerce/./src/views/User/UserCart.vue","webpack://e-commerce/./src/views/User/UserCart.vue?7047"],"sourcesContent":["import axios from 'axios';\nimport { defineStore } from 'pinia';\nimport statusStore from './statusStore';\n\nconst status = statusStore();\n\nexport default defineStore('productStore', {\n    state: () => ({\n        products: [],\n    }),\n    getters: {\n        sortProducts: (state) => state.products.sort((a, b) => a.price - b.price),\n    },\n    actions: {\n        getProducts() {\n            const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n            status.isLoading = true;\n            axios.get(url).then((response) => {\n                this.products = response.data.products;\n                console.log('products:', response);\n                status.isLoading = false;\n            });\n        },\n    }\n});","<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container\">\n    <div class=\"row mt-4\">\n      <!-- 購物車列表 -->\n      <div class=\"col-md-5\">\n        <div class=\"sticky-top\">\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 110px\">數量</th>\n                <th>單價</th>\n              </tr>\n            </thead>\n            <tbody>\n              <template v-if=\"cart.carts\">\n                <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                  <td>\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-danger btn-sm\"\n                      :disabled=\"cartLoadingItem === item.id\"\n                      @click=\"removeCartItem(item.id)\"\n                    >\n                      <i class=\"bi bi-x\"></i>\n                    </button>\n                  </td>\n                  <td>\n                    <a type=\"button\" class=\"\" @click=\"getProduct(item.product.id)\" @keydown=\"bar\">\n                      {{ item.product.title }}\n                    </a>\n                    <div class=\"text-success\" v-if=\"item.coupon\">已套用優惠券</div>\n                  </td>\n                  <td>\n                    <div class=\"input-group input-group-sm\">\n                      <label for=\"qty\"\n                        ><input\n                          type=\"number\"\n                          class=\"form-control\"\n                          min=\"1\"\n                          :disabled=\"cartLoadingItem === item.id\"\n                          @change=\"updateCart(item)\"\n                          v-model.number=\"item.qty\"\n                      /></label>\n                      <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n                    </div>\n                  </td>\n                  <td class=\"text-end\">\n                    <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\"\n                      >折扣價：</small\n                    >\n                    {{ $filters.currency(item.final_total) }}\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"3\" class=\"text-end\">總計</td>\n                <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\n              </tr>\n              <tr v-if=\"cart.final_total !== cart.total\">\n                <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                <td class=\"text-end text-success\">{{ $filters.currency(cart.final_total) }}</td>\n              </tr>\n            </tfoot>\n          </table>\n          <div class=\"input-group mb-3 input-group-sm\">\n            <label for=\"coupon_code\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                v-model=\"coupon_code\"\n                placeholder=\"請輸入優惠碼\"\n              />\n            </label>\n            <div class=\"input-group-append\">\n              <button\n                class=\"btn btn-outline-secondary\"\n                type=\"button\"\n                @click=\"addCouponCode\"\n                :class=\"{ disabled: coupon_code == '' }\"\n              >\n                套用優惠碼\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 送出訂單 -->\n      <div class=\"my-5 row col-md-7 justify-content-center\">\n        <Form class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <Field\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></Field>\n\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\n            <Field\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></Field>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\n            <Field\n              id=\"tel\"\n              name=\"電話\"\n              type=\"tel\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              rules=\"required\"\n              v-model=\"form.user.tel\"\n            ></Field>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\n            <Field\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['地址'] }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"\n            ></Field>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea\n              name=\"\"\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-end\">\n            <button class=\"btn btn-danger\">送出訂單</button>\n          </div>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'pinia';\nimport cartStore from '@/stores/cartStore';\nimport productStore from '@/stores/productStore';\nimport statusStore from '@/stores/statusStore';\n\nexport default {\n  data() {\n    return {\n      coupon_code: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  computed: {\n    ...mapState(cartStore, ['cart']),\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\n  },\n  methods: {\n    ...mapActions(productStore, ['getProducts']),\n    ...mapActions(cartStore, ['addCart', 'getCart', 'removeCartItem', 'updateCart']),\n    ...mapActions(statusStore, ['pushMessage']),\n    getProduct(id) {\n      this.$router.push(`/product/${id}`);\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon }).then((response) => {\n        this.pushMessage({ title: '加入優惠卷', style: 'success' });\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    createOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http.post(url, { data: order }).then((res) => {\n        console.log(res);\n      });\n    },\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=05270241\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\joe\\\\Desktop\\\\vue電商練習\\\\e-commerce\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","products","getters","sortProducts","sort","a","b","price","actions","getProducts","url","isLoading","axios","then","response","this","data","console","log","class","_createElementVNode","style","_hoisted_8","for","colspan","_createVNode","_component_Loading","active","_ctx","_hoisted_6","carts","_createElementBlock","_Fragment","key","_renderList","item","id","type","disabled","onClick","$options","product","onKeydown","title","_hoisted_10","coupon","min","onChange","qty","$event","_toDisplayString","unit","final_total","total","currency","_hoisted_18","_hoisted_20","_hoisted_21","$data","placeholder","_component_Form","onSubmit","errors","_hoisted_28","_component_Field","name","rules","user","email","_component_ErrorMessage","_hoisted_30","_hoisted_32","tel","_hoisted_34","address","_hoisted_36","cols","rows","message","_hoisted_37","coupon_code","form","computed","mapState","cartStore","methods","mapActions","productStore","getProduct","$router","push","addCouponCode","code","$http","post","pushMessage","getCart","createOrder","order","res","created","__exports__","render"],"sourceRoot":""}